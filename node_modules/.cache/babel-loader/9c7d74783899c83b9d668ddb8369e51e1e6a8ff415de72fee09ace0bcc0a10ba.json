{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FooterSection from '../Footer.vue';\nimport HeaderSection from '../Header.vue';\nimport VueCookies from 'vue-cookies';\nexport default {\n  name: 'signIn',\n  components: {\n    FooterSection,\n    HeaderSection\n  },\n  data() {\n    return {\n      userName: \"\",\n      password: \"\",\n      userId: \"\",\n      loginUrl: \"http://localhost:80/karigui/rest-api/rest/api/V1/login.php\",\n      token: \"\",\n      loaclUserName: \"\",\n      loaclUserId: null\n    };\n  },\n  methods: {\n    async login() {\n      try {\n        await fetch(this.loginUrl, {\n          method: \"POST\",\n          body: JSON.stringify({\n            userName: this.userName,\n            password: this.password\n          })\n        }).then(response => response.json()).then(data => {\n          if (data.success) {\n            this.token = data.sessionToken;\n            VueCookies.set(\"user\", data.user);\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n      if (this.token) {\n        VueCookies.set(\"session\", this.token, \"30d\");\n        this.logged = true;\n        this.loaclUserName = VueCookies.get(\"user\").userName;\n        this.loaclUserId = VueCookies.get(\"user\").userId;\n        this.$router.push('/');\n      }\n    }\n  },\n  mounted() {\n    if (localStorage.getItem('reloaded')) {\n      // The page was just reloaded. Clear the value from local storage\n      // so that it will reload the next time this page is visited.\n      localStorage.removeItem('reloaded');\n    } else {\n      // Set a flag so that we know not to reload the page twice.\n      localStorage.setItem('reloaded', '1');\n      location.reload();\n    }\n  }\n};","map":{"version":3,"names":["FooterSection","HeaderSection","VueCookies","name","components","data","userName","password","userId","loginUrl","token","loaclUserName","loaclUserId","methods","login","fetch","method","body","JSON","stringify","then","response","json","success","sessionToken","set","user","error","console","log","logged","get","$router","push","mounted","localStorage","getItem","removeItem","setItem","location","reload"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/karigui/src/components/Page/signIn.vue"],"sourcesContent":["<template>\n    <HeaderSection />\n    <section class=\"sign-in\">\n        <form @submit.prevent=\"login\">\n            <div class=\"mb-3\">\n                <label for=\"userName\" class=\"form-label\">userName</label>\n                <input v-model.lazy=\"userName\" type=\"text\" class=\"form-control\" id=\"userName\" name=\"userName\"\n                    placeholder=\"userName\">\n            </div>\n            <div class=\"mb-3\">\n                <label for=\"passwaord\" class=\"form-label\">Passwaord</label>\n                <input v-model.lazy=\"password\" type=\"password\" class=\"form-control\" id=\"passwaord\" name=\"passwaord\"\n                    placeholder=\"Passwaord\">\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Sign in</button>\n        </form>\n    </section>\n    <FooterSection />\n</template>\n\n<script>\nimport FooterSection from '../Footer.vue';\nimport HeaderSection from '../Header.vue';\nimport VueCookies from 'vue-cookies';\n\nexport default {\n    name: 'signIn',\n    components: {\n        FooterSection,\n        HeaderSection\n    },\n    data() {\n        return {\n            userName: \"\",\n            password: \"\",\n            userId: \"\",\n            loginUrl: \"http://localhost:80/karigui/rest-api/rest/api/V1/login.php\",\n            token: \"\",\n            loaclUserName: \"\",\n            loaclUserId: null\n        }\n    },\n    methods: {\n        async login() {\n            try {\n                await fetch(this.loginUrl, {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        userName: this.userName,\n                        password: this.password\n                    })\n                }).then((response) => response.json()\n                ).then((data) => {\n                    if (data.success) {\n                        this.token = data.sessionToken;\n                        VueCookies.set(\"user\", data.user);\n                    }\n                });\n\n            } catch (error) {\n                console.log(error);\n            }\n            if (this.token) {\n                VueCookies.set(\"session\", this.token, \"30d\");\n                this.logged = true;\n                this.loaclUserName = VueCookies.get(\"user\").userName;\n                this.loaclUserId = VueCookies.get(\"user\").userId;\n                this.$router.push('/');\n            }\n        },\n    },\n    mounted() {\n    if (localStorage.getItem('reloaded')) {\n        // The page was just reloaded. Clear the value from local storage\n        // so that it will reload the next time this page is visited.\n        localStorage.removeItem('reloaded');\n    } else {\n        // Set a flag so that we know not to reload the page twice.\n        localStorage.setItem('reloaded', '1');\n        location.reload();\n    }\n    }\n}\n</script>\n"],"mappings":";AAqBA,OAAOA,aAAY,MAAO,eAAe;AACzC,OAAOC,aAAY,MAAO,eAAe;AACzC,OAAOC,UAAS,MAAO,aAAa;AAEpC,eAAe;EACXC,IAAI,EAAE,QAAQ;EACdC,UAAU,EAAE;IACRJ,aAAa;IACbC;EACJ,CAAC;EACDI,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,4DAA4D;MACtEC,KAAK,EAAE,EAAE;MACTC,aAAa,EAAE,EAAE;MACjBC,WAAW,EAAE;IACjB;EACJ,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,KAAKA,CAAA,EAAG;MACV,IAAI;QACA,MAAMC,KAAK,CAAC,IAAI,CAACN,QAAQ,EAAE;UACvBO,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBb,QAAQ,EAAE,IAAI,CAACA,QAAQ;YACvBC,QAAQ,EAAE,IAAI,CAACA;UACnB,CAAC;QACL,CAAC,CAAC,CAACa,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CACpC,CAAC,CAACF,IAAI,CAAEf,IAAI,IAAK;UACb,IAAIA,IAAI,CAACkB,OAAO,EAAE;YACd,IAAI,CAACb,KAAI,GAAIL,IAAI,CAACmB,YAAY;YAC9BtB,UAAU,CAACuB,GAAG,CAAC,MAAM,EAAEpB,IAAI,CAACqB,IAAI,CAAC;UACrC;QACJ,CAAC,CAAC;MAEN,EAAE,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;MACA,IAAI,IAAI,CAACjB,KAAK,EAAE;QACZR,UAAU,CAACuB,GAAG,CAAC,SAAS,EAAE,IAAI,CAACf,KAAK,EAAE,KAAK,CAAC;QAC5C,IAAI,CAACoB,MAAK,GAAI,IAAI;QAClB,IAAI,CAACnB,aAAY,GAAIT,UAAU,CAAC6B,GAAG,CAAC,MAAM,CAAC,CAACzB,QAAQ;QACpD,IAAI,CAACM,WAAU,GAAIV,UAAU,CAAC6B,GAAG,CAAC,MAAM,CAAC,CAACvB,MAAM;QAChD,IAAI,CAACwB,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MAC1B;IACJ;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAG;IACV,IAAIC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,EAAE;MAClC;MACA;MACAD,YAAY,CAACE,UAAU,CAAC,UAAU,CAAC;IACvC,OAAO;MACH;MACAF,YAAY,CAACG,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC;MACrCC,QAAQ,CAACC,MAAM,CAAC,CAAC;IACrB;EACA;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}